version: '3.8'
services:
  func-sync-worker:
    image: node:18-alpine
    container_name: crewflow-func-sync-worker-staging
    working_dir: /app
    env_file:
      - .env.staging
    environment:
      - SYNC_TARGET_URL=${SYNC_TARGET_URL}
      - FUNCIONARIOS_SYNC_INTERVAL_MINUTES=${FUNCIONARIOS_SYNC_INTERVAL_MINUTES:-60}
      - TZ=${TZ:-America/Sao_Paulo}
    volumes:
      - .:/app
    command: ["node", "scripts/funcionarios-sync-worker.js"]
    restart: unless-stopped
